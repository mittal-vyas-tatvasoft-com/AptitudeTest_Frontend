<mat-toolbar class="c-toolbar">
  <mat-icon *ngIf="canNavigateUp" class="pointer" (click)="navigateUp()">
    arrow_back
  </mat-icon>
  <span
    *ngFor="let element of breadcrumbsElement; let i = index"
    class="file-path cursor-pointer"
    (click)="breadcrumbsClick(element, i)"
  >
    {{ i == 0 ? element.path : " > " + element.path }}
  </span>
</mat-toolbar>
<mat-menu #rootMenu="matMenu" [overlapTrigger]="false">
  <ng-template matMenuContent let-element="element">
    <button mat-menu-item (click)="deleteElement(element)">
      <mat-icon>delete</mat-icon>
      <span>Delete</span>
    </button>
  </ng-template>
</mat-menu>

<div fxFlex fxLayout="row" fxLayoutAlign="space-between stretch">
  <div class="content" fxFlex fxLayout="row">
    <mat-grid-list cols="1" rowHeight="75px" fxFlex>
      <div class="no-file-msg" *ngIf="fileElements.length === 0">
        This folder is empty.
      </div>
      <mat-grid-tile
        *ngFor="let element of fileElements"
        class="file-or-folder"
      >
        <div class="inside-grid-tile">
          <div
            class="folder-file-list"
            (click)="navigate(element)"
            (contextmenu)="openMenu($event, menuTrigger)"
          >
            <mat-icon
              color="primary"
              class="file-or-folder-icon pointer"
              *ngIf="element.isFolder"
            >
              folder
            </mat-icon>
            <img
              *ngIf="filesService.getIconPath(element.name)"
              class="file-or-folder-icon pointer"
              [src]="getImgPath(filesService.getIconPath(element.name))"
              alt="icon"
            />
            <mat-icon
              *ngIf="
                !element.isFolder &&
                filesService.getIconPath(element.name) === undefined
              "
              color="primary"
              class="file-or-folder-icon pointer"
            >
              insert_drive_file
            </mat-icon>

            <span class="pointer">
              <span
                [matMenuTriggerFor]="rootMenu"
                [matMenuTriggerData]="{ element: element }"
                #menuTrigger="matMenuTrigger"
              >
              </span>
              {{ element.name }}
            </span>
          </div>
          <div *ngIf="!element.isFolder">
            <mat-icon
              color="primary"
              class="pointer"
              (click)="downloadFile(element.name)"
            >
              arrow_downward
            </mat-icon>
          </div>
        </div>
      </mat-grid-tile>
    </mat-grid-list>
  </div>
</div>

<ng-template #box>
  <div class="dialog-header c-dialog-header">
    <button mat-icon-button mat-dialog-close class="dialog-close">
      <img src="assets/images/close-grey.svg" alt="Close" />
    </button>
  </div>
  <mat-dialog-content class="dialog-body">
    <div>
      <img
        class="preview-img"
        [src]="filesService.getImagePath(this.fileName)"
        alt="ScreenShot"
      />
    </div>
  </mat-dialog-content>
</ng-template>
