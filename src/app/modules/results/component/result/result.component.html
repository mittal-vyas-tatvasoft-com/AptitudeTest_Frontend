<div class="page-header">
  <div class="title-wrap">
    <mat-icon class="page-icon">
      <img src="./assets/images/results-primary.svg" alt="Results" />
    </mat-icon>
    <h4 class="title">Results</h4>
  </div>
  <div class="action-list">
    <button
      mat-flat-button
      color="primary"
      class="btn-with-icon"
      (click)="exportData()"
    >
      <mat-icon
        ><img src="./assets/images/export-white.svg" alt="Export"
      /></mat-icon>
      Export
    </button>
  </div>
</div>
<form [formGroup]="filterForm">
  <mat-card class="form-block mb-3">
    <mat-card-content class="pb-0">
      <div class="row">
        <div class="col-sm">
          <div class="row">
            <div class="col-lg-3 col-sm-6">
              <mat-form-field appearance="outline">
                <mat-label>{{ filterControls.searchQuery.label }}</mat-label>
                <input
                  matInput
                  [formControlName]="filterControls.searchQuery.key"
                />
              </mat-form-field>
            </div>
            <div class="col-lg-3 col-sm-6">
              <mat-form-field appearance="outline">
                <mat-label>Test</mat-label>
                <mat-select [formControlName]="filterControls.test.key">
                  <mat-option [value]="null">All</mat-option>
                  <mat-option *ngFor="let item of groups" [value]="item">
                    {{ item.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-3 col-sm-6">
              <mat-form-field appearance="outline">
                <mat-label>{{ filterControls.group.label }}</mat-label>
                <mat-select [formControlName]="filterControls.group.key">
                  <mat-option [value]="null">All</mat-option>
                  <mat-option *ngFor="let item of groups" [value]="item">
                    {{ item.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-lg-3 col-sm-6">
              <mat-form-field appearance="outline">
                <mat-label>{{ filterControls.college.label }}</mat-label>
                <mat-select [formControlName]="filterControls.college.key">
                  <mat-option [value]="null">All</mat-option>
                  <mat-option *ngFor="let item of groups" [value]="item">
                    {{ item.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <div class="col-sm-auto pb-2 pb-sm-0">
          <button
            mat-stroked-button
            color="primary"
            class="mt-auto"
            (click)="clearFilters()"
            matTooltip="Clear"
          >
            clear
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</form>
<app-result-table
  [dataSource]="dataSource"
  (detailsClicked)="getDetails($event)"
  [totalItemsCount]="totalItemsCount"
  [pageSize]="pageSize"
  (pageSizeChanged)="handlePageSizeChange($event)"
  (pageToPage)="handlePageToPage($event)"
  (pageChanged)="handlePageChange($event)"
  (sortingChanged)="handleDataSorting($event)"
></app-result-table>
<app-statistics-table [statisticsData]="statisticsData"></app-statistics-table>
