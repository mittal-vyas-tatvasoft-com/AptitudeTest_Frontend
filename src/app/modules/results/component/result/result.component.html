<div class="page-header">
  <div class="title-wrap">
    <mat-icon class="page-icon">
      <img src="./assets/images/results-primary.svg" alt="Results" />
    </mat-icon>
    <h4 class="title">Results</h4>
  </div>
  <div class="action-list">
    <button
      mat-flat-button
      color="primary"
      class="btn-with-icon"
      (click)="exportData()"
    >
      <mat-icon
        ><img src="./assets/images/export-white.svg" alt="Export"
      /></mat-icon>
      Export
    </button>
  </div>
</div>
<form [formGroup]="filterForm">
  <mat-card class="form-block mb-3">
    <mat-card-content class="pb-0">
      <div class="row">
        <div class="col-sm">
          <div class="row">
            <div class="col-lg-3 col-sm-6">
              <app-text-control
                [formControlModel]="filterControls.searchQuery"
                [form]="filterForm"
                (keyupEvent)="search()"
              ></app-text-control>
            </div>
            <div class="col-lg-3 col-sm-6">
              <app-select
                [form]="filterForm"
                [formControlModel]="filterControls.test"
                [options]="tests"
                (selection)="onFilterChange()"
              >
              </app-select>
            </div>
            <div class="col-lg-3 col-sm-6">
              <app-select
                [form]="filterForm"
                [formControlModel]="filterControls.group"
                [options]="groups"
                (selection)="onFilterChange()"
              >
              </app-select>
            </div>
            <div class="col-lg-3 col-sm-6">
              <app-select
                [form]="filterForm"
                [formControlModel]="filterControls.college"
                [options]="colleges"
                (selection)="onFilterChange()"
              >
              </app-select>
            </div>
          </div>
        </div>
        <div class="col-sm-auto pb-2 pb-sm-0">
          <button
            mat-stroked-button
            color="primary"
            class="mt-auto"
            (click)="clearFilters()"
          >
            clear
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</form>
<app-result-table
  [dataSource]="dataSource"
  (detailsClicked)="getDetails($event)"
  [totalItemsCount]="totalItemsCount"
  [pageSize]="pageSize"
  (pageSizeChanged)="handlePageSizeChange($event)"
  (pageToPage)="handlePageToPage($event)"
  (pageChanged)="handlePageChange($event)"
  (sortingChanged)="handleDataSorting($event)"
></app-result-table>
<app-statistics-table [statisticsData]="statisticsData"></app-statistics-table>
